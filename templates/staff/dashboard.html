{% extends 'staff/base.html' %}

{% block title %}Staff Dashboard{% endblock title %}
{% block page_heading %}Staff Dashboard{% endblock page_heading %}

{% block content %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Pending Orders Card -->
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Your Pending Orders</h3>
        {% if pending_orders %}
        <ul class="space-y-2">
            {% for order in pending_orders %}
            <li class="flex justify-between items-center bg-gray-50 p-3 rounded-md text-sm">
                <span>Order #{{ order.id }} ({{ order.supplier.name if order.supplier else 'N/A' }})</span>
                <span class="font-medium text-yellow-600">{{ order.order_date.strftime('%Y-%m-%d') }}</span>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="text-gray-500">No pending orders.</p>
        {% endif %}
        <div class="mt-4 text-right">
            <a href="{{ url_for('staff.orders') }}" class="text-blue-600 hover:underline text-sm">View All Orders</a>
        </div>
    </div>

    <!-- My Assigned Tasks Card -->
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Your Assigned Tasks</h3>
        {% if my_assigned_tasks %}
        <ul class="space-y-2">
            {% for task in my_assigned_tasks %}
            <li class="flex justify-between items-center bg-gray-50 p-3 rounded-md text-sm">
                <span>{{ task.title }}</span>
                <span class="font-medium {% if task.status == 'pending' and task.due_date and task.due_date < now.date() %}text-red-600{% elif task.status == 'pending' %}text-yellow-600{% else %}text-gray-600{% endif %}">
                    Due: {{ task.due_date.strftime('%Y-%m-%d') if task.due_date else 'N/A' }}
                </span>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="text-gray-500">No assigned tasks.</p>
        {% endif %}
        <div class="mt-4 text-right">
            <a href="{{ url_for('staff.tasks') }}" class="text-blue-600 hover:underline text-sm">View All Tasks</a>
        </div>
    </div>

    <!-- Add more staff-specific cards here if needed -->
</div>
{% endblock content %}
